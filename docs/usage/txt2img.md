---
title: txt2img
description: Генерация картинок по текстовому описанию 
hide_table_of_contents: false
sidebar_position: 2
---
Это основная функция которую мы используем. И так, быстро пробежимся по интерфейсу данной вкладки:

![image](/img/usage/txt2img/UzLRybm.png)

## Промпты {#prompts}
Промпты для большинства анимешных моделей обычно состоят из тегов с [danbooru](https://danbooru.donmai.us), так что при написании промптов для них стоит смотреть теги здесь.

В WebUi есть несколько способов изменения значимости конкретного тега в промпте. Например у вас в промпте есть тег `fox ears` но на картинке на выходе у персонажа нет ушей. Или наоборот, эффeкт от этого тега слишком сильный. Для этого есть возхможность повышать/понижать конкретно его значимость в промпте. выглядит это примерно так: `(тег:1.1) (тег:0.9)`. В первом случае значимость тега немного повышена, во втором понижена. Вы можете дописать это вручную или выделить нужный тег и зажав `Ctrl` на клавиатуре нажимать стрелочки вверх/вниз.

![gif](/img/usage/txt2img/rkBTn3u.gif)

### Негативный промпт {#negative_prompt}
Очень важная штука, без котороый вы будете получать довольно много артефактов и т.п. По сути список того, что вы НЕ хотите видеть в арте. Здесь есть много вариантов того, как он может выглядеть, я покажу то что использую сам:

Обычно, я просто беру этот негатив за основу и по надобности дополняю его тем что мне не нравится на генерации.

```
lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry, bad feet, futa, futanari, yaoi,huge_breasts, large_breasts , broken fingers
```

Многим также нравится использовать очень длинный "универсальный" негативный промпт, но лично я не советую так делать.

## Основные настройки генерации {#main_settings}
Основные настройки `txt2img`. находятся сразу под промптами.

### Sampling method
Метод обработки входного шума от которого зависит минимальное количество итераций после которого, следующие шаги не приносят видимого улучшения картинки.

Очень субьективная штука, используйте тот семплер который вам нравится больше, но помните что некоторым из них нужно больше итераций для получения адекватного результата чем другим. 

Лично я обычно использую `DDIM` или `DPM++ SDE Karras`.

:::note

Внешне, между некоторыми из семплеров может не быть заметной разницы. В таком случае, разница в необходимом количетсве шагов.  Чем меньше нужно шагов - тем генерация быстрее.

:::

<details>
<summary>Примеры работы каждого из сеемплеров</summary>
    <div>

![image](/img/usage/txt2img/dM98n2Z.jpeg)
![image](/img/usage/txt2img/L6ZVq3l.jpeg)

<details>
<summary>Информация о генерации примеров</summary>
    
Prompt:

```
best quality, 1girl, small breasts, japanese armor, red hair, long hair, 
red eyes, fox ears, animal_ear_fluff, holding weapon, bow \(weapon\),holding bow \(weapon\),
```
Negative prompt: 

```
 lowres, bad anatomy, bad hands, text, error, missing fingers, extra digit, fewer digits, cropped, worst quality, low quality, normal quality, jpeg artifacts, signature, watermark, username, blurry, bad feet, futa, futanari, yaoi,huge_breasts, large_breasts , (demon horns:1.1), blood, ribs, rebs, realistic face, broken fingers, earrings, hair ornament, loli, bad hands, bad fingers, thick thighs, pubic hair
```
Settings:

```text
Steps: 70, CFG scale: 11, Size: 512x920, Model hash: 0873291ac5
Model: AbyssOrangeMix2_nsfw, Clip skip: 2, ENSD: 31337,
```

</details>

</div>
</details>

### Sampling steps

Количетсво шагов/итераций в ходе которых нейросеть будет обрабатывать картинку. От этого может зависить детализация, и напрямую зависит скорость. Некоторым семплерам может быть необходимо больше итераций, но обычно (по крайней  мере для тех двух что я указывал выше) количество шагов держится в районе `20-30`.

![image](/img/usage/txt2img/ITpi1fJ.jpeg)

### Width/Heigh

Соответственно ширина и высота генерируемой картинки.
Не советую генерировать в болших разрешениях, так как это будет ломать композицию и в итоге вы получите кашу из поломаных конечностей и т.п.

![image](/img/usage/txt2img/u4UCAjv.jpeg)

### Batch count/Batch size

Все просто:
* `Batch size` - количество картинок генерирующихся **одновременно**.
* `Batch count` - количество картинок/батчей генерирующихся **по очереди**. Т.е. после нажатия кнопки процесс генерации будет повторятся заданное количество раз. 

### CFG Scale

Настраивает то, насколько сильно нейросеть будет прислушиватся к тому что написано промпту. Обычно используются значения в районе `5-15`, однако инногда на более низких значениях можно получить арты интереснее чем на высоких. 

Слишком высокие начения только портят картинку, не советую их использовать.

![image](/img/usage/txt2img/IAtLwsl.jpeg)

### Seed

В майкнрафт играли? Ну вот тут сид работает абсолютно также как и в майнкрафте. Ключ генерации при использовании которого можно получить такую же или просто схожую картинку. Единственное - настройки тоже должны быть идентичными.

### Restore faces

Бесполезен при генерации анимешных артов. Помогает починить лица вовремя генерации в реалистичных стилях.

### Tiling

Генерирует картинки которые можно бесконечно обьеденять, например используя как текстуры. (за картинку спасибо [@Antlers_Anon](https://antlers-anon.fanbox.cc/posts/5250143))

![gif](/img/usage/txt2img/ezxgarP.gif)

### Hires. fix

Необходим для генерации в адекватном разрешении без искажения композиции. 
По сути апскейлит картинку одним из представленных методов, после чего делает img2img.
Пройдемся по основным настройкам:

#### Upscaler {#hiresfix-upscaler}

Апскейлер с помощью которого будет производится апскейл перед img2img. Не принципиально важен, но можете поиграться и выбрать тот с которым у вас будет выходить лучший результат.

#### Upscale by/Resize width/height to {#hiresfix-upscalebywh}

Два способа указать конечное разрешение. Используя  `Upscale by` вы просто указываете **в сколько раз** увеличить картинку, по умолчканию стоит `2`.
Используя же `Resize width to` и `Resize height to` можно указать конкретные высоту и ширину которую вы хотите получить на выходе, по умолчанию отключено.

#### Hires steps {#hiresfix-steps}

Количество шагов при img2img hires fix\`a, когда стоит `0` оно равно количеству шагов генерации txt2img.

#### Denoising strength {#hiresfix-denoising}

Регулирует то, насколько сильно нейронка будет опираться на предидущую генерацию, а насколько сильно на промпт. 
* `0` - просто отдаст старую картинку без изменений
* `1` - сгенерирует абсолютно новую картинку

Лично я рекомендую ставить деноиз в районе `0.5-0.6`.



